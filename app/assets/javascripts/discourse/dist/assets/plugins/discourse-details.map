{"version":3,"sources":["discourse/plugins/discourse-details/initializers/apply-details.js","discourse/plugins/discourse-details/lib/discourse-markdown/details.js"],"sourcesContent":["define(\"discourse/plugins/discourse-details/initializers/apply-details\", [\"exports\", \"I18n\", \"discourse/lib/plugin-api\"], function (_exports, _I18n, _pluginApi) {\n  \"use strict\";\n\n  Object.defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n  _exports.default = void 0;\n  0; //eaimeta@70e063a35619d71f0,\"I18n\",0,\"discourse/lib/plugin-api\"eaimeta@70e063a35619d71f\n\n  function initializeDetails(api) {\n    api.decorateCooked($elem => $(\"details\", $elem), {\n      id: \"discourse-details\"\n    });\n    api.addToolbarPopupMenuOptionsCallback(() => {\n      return {\n        action: \"insertDetails\",\n        icon: \"caret-right\",\n        label: \"details.title\"\n      };\n    });\n    api.modifyClass(\"controller:composer\", {\n      pluginId: \"discourse-details\",\n      actions: {\n        insertDetails() {\n          this.toolbarEvent.applySurround(\"\\n\" + `[details=\"${_I18n.default.t(\"composer.details_title\")}\"]` + \"\\n\", \"\\n[/details]\\n\", \"details_text\", {\n            multiline: false\n          });\n        }\n\n      }\n    });\n  }\n\n  var _default = {\n    name: \"apply-details\",\n\n    initialize() {\n      (0, _pluginApi.withPluginApi)(\"0.8.7\", initializeDetails);\n    }\n\n  };\n  _exports.default = _default;\n});","define(\"discourse/plugins/discourse-details/lib/discourse-markdown/details\", [\"exports\"], function (_exports) {\n  \"use strict\";\n\n  Object.defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n  _exports.setup = setup;\n  0; //eaimeta@70e063a35619d71feaimeta@70e063a35619d71f\n\n  const rule = {\n    tag: \"details\",\n\n    before(state, tagInfo) {\n      const attrs = tagInfo.attrs;\n      state.push(\"bbcode_open\", \"details\", 1);\n      state.push(\"bbcode_open\", \"summary\", 1);\n      let token = state.push(\"text\", \"\", 0);\n      token.content = attrs[\"_default\"] || \"\";\n      state.push(\"bbcode_close\", \"summary\", -1);\n    },\n\n    after(state) {\n      state.push(\"bbcode_close\", \"details\", -1);\n    }\n\n  };\n\n  function setup(helper) {\n    helper.allowList([\"summary\", \"summary[title]\", \"details\", \"details[open]\", \"details.elided\"]);\n    helper.registerPlugin(md => {\n      md.block.bbcode.ruler.push(\"details\", rule);\n    });\n  }\n});"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;","file":"discourse-details.js"}