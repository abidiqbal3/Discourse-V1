!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e=e||self,t(e.diff={}))}(this,function(e){"use strict";function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return c(e)||d(e)||l(e)||f()}function c(e){if(Array.isArray(e))return u(e)}function d(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function l(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){var n=String(e);switch(t){case"boolean":return"false"!==n;case"string":return n;case"number":return W(n,10);case"array":return n.split(",");case"object":return ee(n)}}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:typeof t,r=arguments.length>3?arguments[3]:void 0;if(r&&e in r)return r[e];var a="DIFF_".concat(e.replace(/[^a-zA-Z0-9]/,"")).toLowerCase();if(oe){var o=new ne(te.search);if(o.has(a))return h(decodeURIComponent(String(o.get(a))),n)}return ie&&a in K.env?h(K.env[a],n):t}function p(e,t,r){var a=null;if(Te.protected.has(e)||Te.allocated.has(e))a=e;else if(!e||me(e)){var o=e?e.length:0;r=[];for(var i=0;i<o;i++)e&&r.push(e[i]);a=p(ge,null,r)}if(a)return a;var c="object"==typeof e,d=e;if(e&&c&&"ownerDocument"in d){if(d.nodeType===_.TEXT){var l=p(Ne,d.nodeValue);return J.set(l,d),l}t={},r=[];var u=d.attributes;if(d.nodeType===_.ELEMENT&&u&&u.length)for(var f=0;f<u.length;f++){var h=u[f],v=h.name,m=h.value;m===j.STR&&v in d?t[v]=e[v]:t[v]=m}if(d.nodeType===_.ELEMENT||d.nodeType===_.FRAGMENT){r=[];for(var T=0;T<d.childNodes.length;T++){var g=d.childNodes[T];r.push(p(g))}}return J.forEach(function(t,n){t===e&&(a=n)}),a=a||p(d.nodeName,t,r),a.attributes=n(n({},a.attributes),t),a.childNodes=r,J.set(a,d),a}if(c){var N=e.rawNodeName,b=e.nodeName,y=e.nodeValue,E=e.attributes,w=e.childNodes,k=e.children,S=N||b,R=p(S,E||null,k||w);return y&&(R.nodeValue=y),R}for(var O=arguments.length,M=new Array(O>3?O-3:0),C=3;C<O;C++)M[C-3]=arguments[C];M.length&&(r=[r].concat(M)),a=pe.get();var A=e===Ne;"string"==typeof e?(a.rawNodeName=e,a.nodeName=a.rawNodeName.toLowerCase()):(a.rawNodeName=e,a.nodeName=ge),a.nodeValue=j.STR,a.key=j.STR,a.childNodes.length=0,a.attributes={};var L=me(t)||"object"!=typeof t,x=L?t:r,D=me(x)?x:[x];if(A){var V=D.join(j.STR);return a.nodeType=_.TEXT,a.nodeValue=String(V),a}if(a.nodeName===ge?a.nodeType=_.FRAGMENT:a.nodeType="#comment"===e?_.COMMENT:_.ELEMENT,x&&D.length&&(!t||!t.childNodes))for(var I=0;I<D.length;I++){var H=D[I];if(me(H)){var P;(P=a.childNodes).push.apply(P,s(H))}else{if(!H)continue;if(H.nodeType===_.FRAGMENT&&"string"==typeof H.rawNodeName){var B;(B=a.childNodes).push.apply(B,s(H.childNodes))}else H&&"object"==typeof H?a.childNodes.push(p(H)):a.childNodes.push(p(Ne,null,H))}}if(t&&"object"==typeof t&&!me(t)&&(a.attributes=n({},t),t.childNodes)){var z="object"==typeof t.childNodes;a.childNodes.push(z?p(t.childNodes):p("#text",t.childNodes))}return"script"===a.nodeName&&a.attributes.src&&(a.key=String(a.attributes.src)),a.attributes&&"key"in a.attributes&&(a.key=String(a.attributes.key)),X.size&&X.forEach(function(e,t){(t=e(a))&&(a=p(t))}),a}function m(e){if(be(e),e.childNodes.length)for(var t=0;t<e.childNodes.length;t++)m(e.childNodes[t])}function T(e){if(ye(e),e.childNodes.length)for(var t=0;t<e.childNodes.length;t++)T(e.childNodes[t]);J.delete(e)}function g(){Ee.allocated.forEach(function(e){Ee.free.add(e),Ee.allocated.delete(e),J.delete(e)})}function N(e){var t=e.mount,n=e.input,r=n,a=Oe++;return v("collectMetrics",!1)?function(e){e="[".concat(a,"] ").concat(e);var n=t.host;t&&n?e="".concat(n.constructor.name," ").concat(e):r&&"function"==typeof r.rawNodeName&&(e="".concat(r.rawNodeName.name," ").concat(e));var o="".concat(e,"-end");if(Se.has(e)){var i=Se.get(e)||0,s=(performance.now()-i).toFixed(3);Se.delete(e),performance.mark(o),performance.measure("".concat(ke," ").concat(e," (").concat(s,"ms)"),e,o)}else Se.set(e,performance.now()),performance.mark(e)}:Re}function b(e){var t=e.state,n=e.state.isRendering;t.measure("schedule"),U.forEach(function(r){var a=r.activeTransaction&&r.activeTransaction.mount,o=e.mount;a&&o&&r.isRendering&&(a.contains&&a.contains(o)||o.contains&&o.contains(a)?(t=r,n=!0):a===o&&(t=r,n=!0))});var r=t,a=r.activeTransaction,o=r.nextTransaction;if(n){var i=e.tasks;t.nextTransaction=e,e.abort();var s=o&&o.promise||a.promise||Promise.resolve();return e.promise=s.then(function(){return e.aborted=!1,e.state.isRendering=!0,e.state.activeTransaction=e,t.measure("schedule"),Fe.flow(e,i.slice(1))})}t.isRendering=!0,t.activeTransaction=e,t.measure("schedule")}function y(e){var t=e.mount,n=e.input,r=e.state.measure,a=e.config,o=a.inner?"innerHTML":"outerHTML";r("should update");var i=t;if("string"==typeof n&&i[o]===n)return e.abort(!0);r("should update")}function E(e){if(U.has(e)){var t=U.get(e),n=t.mutationObserver,r=t.oldTree;n&&n.disconnect(),U.delete(e),r&&!J.has(r)&&($.forEach(function(e){return e(r)}),T(r))}if(e){var a=e;if(a.childNodes&&a.childNodes.length)for(var o=0;o<a.childNodes.length;o++)E(a.childNodes[o]);a.shadowRoot&&E(a.shadowRoot),J.forEach(function(e,t){e===a&&($.forEach(function(e){return e(t)}),T(t))})}}function w(e){var t=e.state,n=e.mount,r=e.input,a=e.config,o=a.inner,i=n,s=i.outerHTML;t.mutationObserver&&!t.isDirty&&(t.isDirty=Boolean(t.mutationObserver.takeRecords().length)),t.previousMarkup!==s&&(t.isDirty=!0),!t.isDirty&&t.oldTree&&s||(E(n),t.oldTree=p(i),m(t.oldTree),U.set(n,t));var c=t.oldTree,d=c.nodeName,l=c.attributes,u=r;if(!o&&u.nodeType===_.FRAGMENT&&t.oldTree.nodeType!==_.FRAGMENT){var f=[];u.childNodes.forEach(function(e){e.nodeType===_.TEXT&&!e.nodeValue.trim()||f.push(e)}),1===f.length?e.newTree=f[0]:f.length>1&&(e.newTree=p(u.childNodes))}e.newTree||(e.newTree=p(r)),e.oldTree=t.oldTree;var h=e.oldTree,v=e.newTree;if(o&&h&&v){var T="string"!=typeof v.rawNodeName,g=v.nodeType===_.FRAGMENT,N=g&&!T?v.childNodes:v;e.newTree=p(d,l,N)}}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e||(e=j.OBJ),t||(t=j.OBJ);var o=r.svgElements,i=void 0===o?new Set:o,s=e.nodeName,c=t.nodeName,d=e===j.OBJ||a,l="svg"===c||i.has(t),u=null;if(Z.size&&Z.forEach(function(r){var a=r(e,t);a&&a===e?u=n:!1===a?u=!1:a&&(t=a)}),null!==u||!t)return u;if(c===Ae){if(s===Ae&&e.nodeValue!==t.nodeValue)return n.push(B.NODE_VALUE,e,t.nodeValue,e.nodeValue),e.nodeValue=t.nodeValue,n;if(d)return n.push(B.NODE_VALUE,t,t.nodeValue,null),n}var f=t.childNodes||[];if(t.nodeType===_.ELEMENT){var h=d?j.OBJ:e.attributes,v=t.attributes||{};for(var p in v){var m=v[p];p in h&&h[p]===v[p]||(d||(h[p]=m),(e&&"script"===e.nodeName||"script"!==t.nodeName||"type"!==p)&&n.push(B.SET_ATTRIBUTE,d?t:e,p,m))}if(!d)for(var T in h)T in v||(n.push(B.REMOVE_ATTRIBUTE,e,T),delete h[T])}if(a){for(var g=0;g<f.length;g++)l&&i.add(f[g]),k(null,f[g],n,r,!0);return n}for(var N={old:new Map,new:new Map},b=0;b<Ce.length;b++){var y=Ce[b],E=N[y],w=arguments[b],S=w&&w.childNodes;if(S&&S.length)for(var R=0;R<S.length;R++){var O=S[R];O.key&&E.set(O.key,O)}}for(var M=e.childNodes,C=Me(f.length,M.length),A=0;A<C;A++){var L=M&&M[A],x=f[A];if((l||x&&"svg"===x.nodeName)&&i.add(x),x)if(L){var D=x.key,V=L.key,I=N.new.has(V),H=N.old.has(D);if(V||D){if(!I&&!H){M.splice(M.indexOf(L),1,x),k(null,x,n,r,!0),n.push(B.REPLACE_CHILD,x,L),A-=1;continue}if(!I){n.push(B.REMOVE_CHILD,L),M.splice(M.indexOf(L),1),A-=1;continue}if(D!==V){var P=x;D&&H?(P=N.old.get(D),M.splice(M.indexOf(P),1)):P=x,k(null,P,n,r,!0),n.push(B.INSERT_BEFORE,e,P,L),M.splice(A,0,P);continue}}var z=L.nodeName===x.nodeName,F=k(L,x,n,r,!z);if(!1!==F){if(!z){M[A]=x;var U=M.lastIndexOf(x);U>A&&M.splice(U,1),n.push(B.REPLACE_CHILD,x,L)}}else f.splice(A,0,L),C+=1}else M.push(x),k(null,x,n,r,!0),n.push(B.INSERT_BEFORE,e,x,null);else!1===k(L,null,n,r,!0)&&f.splice(A,0,L)}if(M.length!==f.length){for(var J=f.length;J<M.length;J++)n.push(B.REMOVE_CHILD,M[J]);M.length=f.length}return n}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q.document,n=arguments.length>2?arguments[2]:void 0,r=p(e),a=J.get(r);if(a)return a;var o=r.nodeName,i=r.rawNodeName,s=void 0===i?o:i,c=r.childNodes,d=void 0===c?[]:c;n=n||"svg"===o;var l=null,u=null;if(Y.forEach(function(e){(u=e(r))&&(l=u)}),!t)return l;null===l&&(l="#text"===o?t.createTextNode(r.nodeValue||j.STR):"#document-fragment"===o?t.createDocumentFragment():n?t.createElementNS(Le,s):t.createElement(s),"script"===o&&(l.type="no-execute"));var f=l;J.set(r,f);for(var h=0;h<d.length;h++){var v=S(d[h],t,n);f.appendChild(v)}return f}function R(e){var t=e.state,n=e.state.measure,r=e.oldTree,a=e.newTree,o=e.mount;if(n("sync trees"),r&&a&&r.nodeName!==a.nodeName&&a.nodeType!==_.FRAGMENT){e.patches=[B.REPLACE_CHILD,a,r],e.oldTree=t.oldTree=a;var i=S(a);U.delete(o),U.set(i,t),e.mount=i,"script"===a.nodeName&&t.scriptsToExecute.set(a,a.attributes.type||j.STR)}else e.patches=k(r||null,a||null,[],t);n("sync trees")}function O(e,t){var n;null===(n=F.get(e))||void 0===n||n.add(t)}function M(e,t){if(!t&&e){var n;null===(n=F.get(e))||void 0===n||n.clear()}else if(e&&t){var r;null===(r=F.get(e))||void 0===r||r.delete(t)}else for(var a=0;a<z.length;a++){var o;null===(o=F.get(z[a]))||void 0===o||o.clear()}}function C(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=F.get(e),o=[];if(!a)return o;var i=n[0],c=i.nodeType===_.ELEMENT;return!a.size||"textChanged"!==e&&!c?o:(a.forEach(function(e){var t=n.map(function(e){return J.get(e)||e}),r=e.apply(void 0,s(t));"object"==typeof r&&r.then&&o.push(r)}),"attached"!==e&&"detached"!==e||i.childNodes.forEach(function(t){o.push.apply(o,s(C.apply(void 0,[e,t].concat(s(n.slice(1))))))}),o)}function A(e){return xe&&e&&e.indexOf&&e.includes("&")?(xe.innerHTML=e,xe.textContent||j.STR):e}function L(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.OBJ,n=[],r=t.ownerDocument,a=t.svgElements,o=void 0===a?new Set:a,i=e.length,c=0;;){var d=e[c];if(c===i)break;switch(d){case B.SET_ATTRIBUTE:if("break"===function(){var t=e[c+1],a=e[c+2],i=A(e[c+3]);c+=4;var d=o.has(t),l=S(t,r,d);if(!l)return"break";var u=l.getAttribute(a),f=C("attributeChanged",t,a,u,i);return m(t),f.length?(Promise.all(f).then(function(){return Pe(t,l,a,i)}),n.push.apply(n,s(f))):Pe(t,l,a,i),"break"}())break;case B.REMOVE_ATTRIBUTE:if("break"===function(){var t=e[c+1],a=e[c+2];c+=3;var i=o.has(t),d=S(t,r,i);if(!d)return"break";var l=d.getAttribute(a),u=C("attributeChanged",t,a,l,null);return m(t),u.length?(Promise.all(u).then(function(){return _e(d,a)}),n.push.apply(n,s(u))):_e(d,a),"break"}())break;case B.NODE_VALUE:if("break"===function(){var t=e[c+1],a=e[c+2],i=e[c+3],d=o.has(t);c+=4;var l=S(t,r,d);if(!l)return"break";m(t);var u=C("textChanged",t,i,a);return u.length?(Promise.all(u).then(function(){return je(l,a)}),n.push.apply(n,s(u))):je(l,a),"break"}())break;case B.INSERT_BEFORE:var l=e[c+1],u=e[c+2],f=e[c+3];c+=4;var h=J.get(l);if(!h)break;var v=o.has(u);m(u);var p=f&&S(f,r,v),g=S(u,r,v);h.insertBefore(g,p||null),n.push.apply(n,s(C("attached",u)));break;case B.REPLACE_CHILD:if("break"===function(){var t,a,i,d=e[c+1],l=e[c+2];c+=3;var u=o.has(d),f=J.get(l),h=S(d,r,u);if(!f||!f.parentNode)return"break";m(d);var v=null===(t=F.get("attached"))||void 0===t?void 0:t.size,p=null===(a=F.get("detached"))||void 0===a?void 0:a.size,g=null===(i=F.get("replaced"))||void 0===i?void 0:i.size;if(!v&&!p&&!g)return f.parentNode&&(f.parentNode.replaceChild(h,f),T(l)),"break";f.parentNode&&f.parentNode.insertBefore(h,f);var N=[].concat(s(v&&C("attached",d)||j.ARR),s(p&&C("detached",l)||j.ARR),s(g&&C("replaced",l,d)||j.ARR));return N.length?(Promise.all(N).then(function(){f.parentNode&&f.parentNode.removeChild(f),T(l)}),n.push.apply(n,s(N))):(f.parentNode&&f.parentNode.removeChild(f),T(l)),"break"}())break;case B.REMOVE_CHILD:if("break"===function(){var t=e[c+1];c+=2;var r=J.get(t);if(!r||!r.parentNode)return"break";var a=C("detached",t);return a.length?(Promise.all(a).then(function(){r.parentNode&&r.parentNode.removeChild(r),T(t)}),n.push.apply(n,s(a))):(r.parentNode&&r.parentNode.removeChild(r),T(t)),"break"}())break}}return n}function x(e){var t=e.mount,n=e.state,r=e.patches,a=n.mutationObserver,o=n.measure,i=n.scriptsToExecute;o("patch node");var c=t.ownerDocument,d=e.promises||[];n.ownerDocument=c||Q.document,a&&a.disconnect();var l=function(e){"script"===e.nodeName&&i.set(e,e.attributes.type)};Y.add(l),n.ownerDocument&&d.push.apply(d,s(L(r,n))),Y.delete(l),e.promises=d,o("patch node")}function D(e){var t=e.promises;return t&&t.length?e.promise=Promise.all(t).then(function(){return e.end()}):e.promise=Promise.resolve(e.end())}function V(e){return e.replace(/[&<>]/g,function(e){return"&#".concat(e.charCodeAt(0),";")})}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.STR,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.inner=!0,n.executeScripts=!("executeScripts"in n)||n.executeScripts,n.tasks=n.tasks||Be,Fe.create(e,t,n).start()}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.STR,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.inner=!1,n.executeScripts=!("executeScripts"in n)||n.executeScripts,n.tasks=n.tasks||Be,Fe.create(e,t,n).start()}function P(e){var t="function"==typeof e,n=e.subscribe,r=e.unsubscribe,a=e.createTreeHook,o=e.createNodeHook,i=e.syncTreeHook,s=e.releaseHook,c=e.parseHook;return t&&G.add(e),n&&n(Je),a&&X.add(a),o&&Y.add(o),i&&Z.add(i),s&&$.add(s),c&&q.add(c),function(){t&&G.delete(e),r&&r(Je),a&&X.delete(a),o&&Y.delete(o),i&&Z.delete(i),s&&$.delete(s),c&&q.delete(c)}}var _={ELEMENT:1,ATTR:2,TEXT:3,COMMENT:8,FRAGMENT:11},j={STR:"",NUM:1,OBJ:{},ARR:[],MAP:new Map,SET:new Set,DOM:{}},B={SET_ATTRIBUTE:0,REMOVE_ATTRIBUTE:1,NODE_VALUE:2,INSERT_BEFORE:3,REPLACE_CHILD:4,REMOVE_CHILD:5},z=["attached","detached","replaced","attributeChanged","textChanged"],F=new Map([["attached",new Set],["detached",new Set],["replaced",new Set],["attributeChanged",new Set],["textChanged",new Set]]),U=new Map,J=new Map,G=new Set,X=new Set,Y=new Set,Z=new Set,$=new Set,q=new Set,K={env:{NODE_ENV:"production"}},Q="object"==typeof global?global:window||{},W=Number.parseInt,ee=JSON.parse,te=Q.location,ne=Q.URLSearchParams,re=void 0!==ne,ae=void 0!==te,oe=re&&ae,ie=K.env,se={collectMetrics:!0,executeScripts:!0},ce=v("initialPoolSize",5e3),de=new Set,le=new Set,ue=new Set,fe=function(){return{rawNodeName:j.STR,nodeName:j.STR,nodeValue:j.STR,nodeType:_.ELEMENT,key:j.STR,childNodes:[],attributes:{}}},he={free:de,allocated:le,protected:ue},ve=de.values(),pe={size:ce,memory:he,fill:function(){for(var e=this,t=de.size;t<this.size;t++)de.add(fe());this.size<de.size&&de.forEach(function(t){de.size!==e.size&&de.delete(t)})},get:function(){var e=ve.next(),t=e.value,n=void 0===t?fe():t;return e.done&&(ve=de.values()),de.delete(n),le.add(n),n},protect:function(e){le.delete(e),ue.add(e)},unprotect:function(e){ue.has(e)?(ue.delete(e),de.add(e)):le.has(e)&&(le.delete(e),de.add(e))}};pe.fill();var me=Array.isArray,Te=pe.memory,ge="#document-fragment",Ne="#text",be=pe.protect,ye=pe.unprotect,Ee=pe.memory,we=Object.freeze({__proto__:null,protectVTree:m,unprotectVTree:T,gc:g}),ke="diffHTML",Se=new Map,Re=function(){},Oe=0,Me=Math.max,Ce=["old","new"],Ae="#text",Le="http://www.w3.org/2000/svg",xe=Q.document?document.createElement("div"):null,De=Object.keys,Ve=new Set,Ie=new Set,He=["class","checked","disabled","selected"],Pe=function(e,t,n,r){var a="object"==typeof r&&r,o="function"==typeof r,i="symbol"==typeof r,s=0===n.indexOf("on"),c=s?n.toLowerCase():n,d=e.nodeName+"-"+c,l=t;if(Ie.has(d))t[c]=r;else if(!Ve.has(d))try{t[c]=r,Ie.add(d)}catch(e){Ve.add(d)}if(a||o||i){if(a&&"style"===c)for(var u=De(r),f=0;f<u.length;f++)l.style[u[f]]=r[u[f]]}else{var h=null===r||void 0===r;c&&l.setAttribute(c,h?j.STR:r)}},_e=function(e,t){var n=0===t.indexOf("on");e.removeAttribute(t);var r=e.nodeName+"-"+t;if(Ie.has(r)){var a=e;n?a[t]=void 0:delete a[t],He.includes(t)&&(e[t]=!1)}else if(!Ve.has(r))try{var o=e;n?o[t]=void 0:delete o[t],He.includes(t)&&(e[t]=!1),Ie.add(r)}catch(e){Ve.add(r)}},je=function(e,t){var n=e;t.includes("&")?n.nodeValue=A(t):n.nodeValue=t},Be=[b,y,w,R,x,D],ze={schedule:b,shouldUpdate:y,reconcileTrees:w,syncTrees:R,patchNode:x,endAsPromise:D},Fe=function(){function e(t,n,a){var o=this;r(this,e),i(this,"state",j.OBJ),i(this,"mount",j.OBJ),i(this,"input",j.OBJ),i(this,"oldTree",void 0),i(this,"newTree",void 0),i(this,"promise",void 0),i(this,"promises",void 0),i(this,"tasks",[]),i(this,"patches",[]),this.mount=t,this.input=n,this.config=a;var s=function(){return o.state.isDirty=!0},c="MutationObserver"in(Q.window||j.OBJ);this.state=U.get(t)||{measure:N(this),svgElements:new Set,scriptsToExecute:new Map,activeTransaction:this,mutationObserver:c&&new Q.window.MutationObserver(s)},this.tasks=v("tasks",Be,void 0,a).slice(),this.endedCallbacks=new Set,U.set(t,this.state)}return o(e,[{key:"start",value:function(){var t=this.state.measure,n=this.tasks,r=n.pop();return t("render"),this.aborted=!1,e.invokeMiddleware(this),r&&n.push(r),e.flow(this,n)}},{key:"abort",value:function(e){if(this.aborted=!0,e)return this.tasks[this.tasks.length-1](this)}},{key:"end",value:function(){var e=this,t=this.state,n=this.config,r=this.mount,a=t.mutationObserver,o=t.measure,i=t.svgElements,s=t.scriptsToExecute,c=r;return o("finalize"),this.completed=!0,i.clear(),t.isRendering=!1,t.isDirty=!1,c.ownerDocument&&a?a.observe(c,{subtree:!0,childList:!0,attributes:!0,characterData:!0}):t.isDirty=!0,s.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.STR,t=arguments.length>1?arguments[1]:void 0,n=J.get(t);e?n.setAttribute("type",e):n.removeAttribute("type")}),t.previousMarkup="outerHTML"in c?c.outerHTML:j.STR,n.executeScripts&&s.forEach(function(e,n){var r=J.get(n),a=r.cloneNode(!0);r&&(U.has(r)&&(E(r),U.set(a,t)),J.set(n,a),r.parentNode&&r.parentNode.replaceChild(a,r))}),s.clear(),pe.memory.free.size<2*pe.memory.allocated.size&&g(),this.endedCallbacks.forEach(function(t){return t(e)}),this.endedCallbacks.clear(),o("finalize"),o("render"),this}},{key:"onceEnded",value:function(e){this.endedCallbacks.add(e)}}],[{key:"create",value:function(t,n,r){return new e(t,n,r)}},{key:"flow",value:function(e,t){for(var n=e,r=0;r<t.length;r++){if(e.aborted)return n;if(void 0!==(n=t[r](e))&&n!==e)return n}return n}},{key:"assert",value:function(e){}},{key:"invokeMiddleware",value:function(e){var t=e.state.measure,n=e.tasks;G.forEach(function(r){var a="invoke ".concat(r.name||"anon");t(a);var o=r(e);o&&n.push(o),t(a)})}}]),e}(),Ue={StateCache:U,NodeCache:J,TransitionCache:F,MiddlewareCache:G,CreateTreeHookCache:X,CreateNodeHookCache:Y,SyncTreeHookCache:Z,ReleaseHookCache:$,ParseHookCache:q},Je=n({decodeEntities:A,escape:V,makeMeasure:N,memory:we,Pool:pe,process:K,PATCH_TYPE:B,globalConfig:se,createNode:S,syncTree:k,Transaction:Fe,defaultTasks:Be,tasks:ze},Ue),Ge=Symbol.for("diffHTML"),Xe=Object.assign,Ye="".concat("1.0.0-beta.20","-lite");Xe(Je,{VERSION:Ye});var Ze={};Ze.VERSION=Ye,Ze.addTransitionState=O,Ze.removeTransitionState=M,Ze.release=E,Ze.createTree=p,Ze.use=P,Ze.outerHTML=H,Ze.innerHTML=I,Ze.html=p,Ze.Internals=Je;var $e=Q;if(Ge in Q){var qe=$e[Ge];Ye!==qe.VERSION&&console.log("Loaded ".concat(Ye," after ").concat(qe.VERSION))}$e[Ge]=Ze,$e.devTools&&($e.unsubscribeDevTools=P($e.devTools(Je))),e.Internals=Je,e.VERSION=Ye,e.addTransitionState=O,e.createTree=p,e.default=Ze,e.html=p,e.innerHTML=I,e.outerHTML=H,e.release=E,e.removeTransitionState=M,e.use=P,Object.defineProperty(e,"__esModule",{value:!0})});